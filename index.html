<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client-Side Firebase</title>
</head>
<body>
    <h2>Input Data ke Firebase</h2>
    <form id="dataForm">
        <label for="nama">Nama:</label>
        <input type="text" id="nama" required>
        <br><br>
        
        <label for="email">Email:</label>
        <input type="email" id="email" required>
        <br><br>

        <button type="submit">Simpan Data</button>
    </form>

    <h2>Data dari Firebase:</h2>
    <ul id="dataList"></ul>

    <!-- Tambahkan Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-database-compat.js"></script>
    <script src="./firebase-config.js"></script>

    <script>
        // Tangani form submit untuk menambah data
        document.getElementById("dataForm").addEventListener("submit", function(event) {
            event.preventDefault();
            
            const nama = document.getElementById("nama").value;
            const email = document.getElementById("email").value;

            // Kirim data ke Firebase
            db.ref("users").push({ nama, email });

            // Kosongkan input setelah submit
            document.getElementById("nama").value = "";
            document.getElementById("email").value = "";
        });

        // Fungsi untuk mengambil dan menampilkan data dari Firebase
        db.ref("users").on("value", (snapshot) => {
            const dataList = document.getElementById("dataList");
            dataList.innerHTML = ""; // Hapus daftar lama

            if (snapshot.exists()) {
                snapshot.forEach((childSnapshot) => {
                    const data = childSnapshot.val();
                    const li = document.createElement("li");
                    li.textContent = `${data.nama} - ${data.email}`;
                    dataList.appendChild(li);
                });
            } else {
                dataList.innerHTML = "<li>Belum ada data</li>";
            }
        });
    </script>
</body>
</html>
